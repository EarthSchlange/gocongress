%h2 Tournaments for #{@attendee.get_full_name}

%p
  Which tournaments will #{@attendee.get_full_name} be playing in?
  If you have questions, please consult the
  = link_to "tournament schedule", tournaments_path
  or contact the appropriate
  = link_to "tournament director.", contact_path
  

= form_for( @attendee ) do |f|
  = hidden_field_tag :page, @page
  = render :partial => "shared/error_messages", :locals => { :resource => @attendee }

  %br
  %table.lightweight.top-headed.lightly-spaced-rows
    %thead
      %th
      %th Tournament
      %th
        Notes
        %span{:style=>'font-weight:normal;'} (eg. pair go partner, or club team name)
    %tbody
      - @open_tournaments.each do |t|
        - is_checked = @atnd_open_trn_ids.index(t.id).present?
        - cbx_id = 'tournament_id_' + t.id.to_s
        %tr
          %td= check_box_tag "attendee[tournament_id_list][]", t.id, is_checked, :id => cbx_id
          %td= label_tag cbx_id, t.name
          %td
            - if t.show_attendee_notes_field
              - notes_value = @attendee.get_notes_for_tournament(t.id)
              = text_field_tag "attendee[trn_#{t.id}_notes]", notes_value

  %br
  = f.submit "Submit"
  = link_to "cancel", user_path(@attendee.user)
