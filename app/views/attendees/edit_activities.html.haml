- mnh = Activity.model_name.human
- mnhp = mnh.pluralize

%h2= @attendee.full_name
%h3= mnhp

%p
  Sign up for activities here.
  If you have questions please contact the
  = link_to "registrar.", contact_path

%p.notice All #{mnhp}, prices, and times subject to change.

= form_for( @attendee ) do |f|
  = hidden_field_tag :page, @page
  = render :partial => "shared/error_messages", :locals => { :resource => @attendee }

  %br
  %table.semantic.lightly-spaced-rows.zebra.fullwidth
    %thead
      %th
      %th Date
      %th= mnh
      %th Leave
      %th Return
      %th.numeric Price
    %tbody
      - @activities.each do |e|
        - is_checked = @atnd_activity_ids.index(e.id).present?
        - cbx_id = 'activity_id_' + e.id.to_s
        %tr
          %td.align-center= check_box_tag "attendee[activity_id_list][]", e.id, is_checked, :id => cbx_id
          %td= e.leave.to_date.to_formatted_s(:dow_month_day)
          %td= label_tag cbx_id, e.name
          %td= e.leave.to_formatted_s(:american)
          %td
            - if e.return.present?
              = e.return.to_formatted_s(:american)
          %td.numeric= format_price(e.price)

  %br
  = f.submit "Submit"
  = link_to "cancel", user_path(@attendee.user)
