%h2 Register for the #{@year} US Go Congress!

- if (ENV['RAILS_ENV'] == 'production' && @year == 2012)
  %p
    Registration for the 2012 Go Congress will open soon! We are finalizing
    the prices and other information and then we'll be ready to accept your
    registration. Thanks for your interest.

- else
  .vertical-form-instructions
    %p
      %strong Registering more than one person?
      %br/
      If you already have an account, you can add more people to it.
      You do not need to create extra accounts for everyone.

    %p
      %strong I already registered!
      %br/
      In that case, please
      = link_to "sign in.", new_user_session_path

  = form_for(resource, :as => resource_name, :url => registration_path(resource_name)) do |f|

    = render :partial => "shared/error_messages", :locals => { :resource => resource }

    %fieldset
      .field
        = f.label :email
        = f.text_field :email
      .field
        = f.label :password, 'Password'
        = f.password_field :password, :size => 10
      .field
        = f.label :password_confirmation, 'Confirm Password'
        = f.password_field :password_confirmation, :size => 10

    -# For new registrations, we need to set the user's year before
    -# validation, but because we are using Devise
    -# RegistrationsController we can't exactly add a before_filter.
    -# If we do not specify a year before validation, then
    -# validations like the uniqueness check on email will use a
    -# null year, thus making the validation pointless.
    = hidden_field_tag "user[year]", @year

    %fieldset
      .field
        = label '', ''
        = f.submit "Continue"
